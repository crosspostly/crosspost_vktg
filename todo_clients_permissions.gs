/**
 * TODO_CLIENTS.GS — дополнение: понятная активация разрешений для триггеров
 * Дата: 2025-11-02
 */

// 13) Пошаговая активация разрешений для ScriptApp без appsscript.json
//   Цель: обычный пользователь должен легко активировать триггеры.
//   CLIENT (UI + шаги):
//   - В панель добавить кнопку "Активировать разрешения (ScriptApp)"
//   - При нажатии вызвать вспомогательную функцию doFirstAuth(), которая делает любой безопасный вызов ScriptApp
//   - Если ловим исключение AuthorizationRequired → показать модальное окно с понятной инструкцией:
//       1) Расширения → Apps Script → Выполнить функцию doFirstAuth()
//       2) В диалоге выбора аккаунта нажать Продолжить → Разрешить
//       3) Вернуться в таблицу и нажать "Повторить проверку"
//   - По кнопке "Повторить проверку" снова вызвать setupTrigger(); если успешно — показать "✅ Разрешения активированы, триггер создан"
//   - При ошибке: показать "❌ Разрешения не активированы. Повторите шаги выше" и ссылку "Открыть Apps Script"
//
//   CLIENT (код):
//   - doFirstAuth(): ScriptApp.getProjectTriggers(); return {ok:true}
//   - trySetupTrigger(): try { setupTrigger(); ok } catch (e) { if (e.message.includes('permission')) show guide }
//
//   SERVER: не требуется
