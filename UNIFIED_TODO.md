# üìã Unified TODO ‚Äî VK‚ÜíTelegram Crossposter (Server + Client + Fixes + Code Samples)

–û–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-11-03 04:18 MSK
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ï–î–ò–ù–´–ô —Ñ–∞–π–ª –∑–∞–¥–∞—á. –í—Å–µ –ø—Ä–æ—á–∏–µ todo/readme/to_fix ‚Äî —É–¥–∞–ª–∏—Ç—å. –†–∞–±–æ—á–∞—è –∏—Å—Ç–∏–Ω–∞ –∑–¥–µ—Å—å.

---

## üîß SERVER (server.gs)

### A. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (–æ—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ –∫ —Å–ª–æ–∂–Ω–æ–≥–æ)
1) API-–æ–±—ë—Ä—Ç–∫–∞ –∏ JSON –ø–∞—Ä—Å–µ—Ä
- [ ] makeApiRequest(service, url, options)
- [ ] parseJsonSafe(text)
- –í–Ω–µ–¥—Ä–∏—Ç—å –≤: Telegram sendMessage/sendMediaGroup –∏ VK wall.get/video.get

2) –í–∞–ª–∏–¥–∞—Ü–∏—è payload/–ª–∏—Ü–µ–Ω–∑–∏–∏/–æ—Ç–≤–µ—Ç–æ–≤
- [ ] validatePayload(payload, requiredFields)
- [ ] validateLicenseOrThrow(licenseKey)
- [ ] success(data, meta?) / fail(message, code?, meta?) + jsonResponse

3) Caption split —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ
- [ ] ensureCaptionOrSplit(token, chatId, mediaUrls, caption)
- –°–æ–∫—Ä–∞—Ç–∏—Ç—å sendVkPostToTelegram, —É–±—Ä–∞—Ç—å –¥—É–±–ª–∏

4) –£—Ç–∏–ª–∏—Ç—ã Sheets (–º–∏–Ω–∏–º—É–º)
- [ ] getRows(name), findRow(name, predicate), appendRow(name, obj)

5) –í—ã–Ω–µ—Å—Ç–∏ —É—Ç–∏–ª–∏—Ç—ã –≤ —Ñ–∞–π–ª—ã (–ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏)
- api-utils.gs, validation-utils.gs, sheets-utils.gs, html-builder.gs, config-manager.gs

### B. –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏/–º–µ–¥–∏–∞
6) –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ—Å—Ç–∞ –±–µ–∑ ¬´—Ç–µ—Å—Ç–∞¬ª
- [ ] –ï—Å–ª–∏ vk_post –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω –≤ handleSendPost ‚Äî —Å–µ—Ä–≤–µ—Ä —Å–∞–º –±–µ—Ä—ë—Ç 1 –∏–ª–∏ N –Ω–µ–ø—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ –∏–∑ VK –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Å–≤—è–∑–∫–∏

7) –ú–µ–¥–∏–∞-–≥—Ä—É–ø–ø—ã —Å—Ç—Ä–æ–≥–æ –æ–¥–Ω–æ–π –ø–∞—á–∫–æ–π
- [ ] –°–æ–±—Ä–∞—Ç—å —Ñ–æ—Ç–æ –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ ‚Üí –æ–¥–∏–Ω sendMediaGroup (–¥–æ 10)
- [ ] –í–∏–¥–µ–æ/–∞—É–¥–∏–æ/–¥–æ–∫–∏ ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º (—Å–ø–∏—Å–æ–∫ —Å—Å—ã–ª–æ–∫)

### C. –°—Å—ã–ª–∫–∏ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
8) VK ‚Üí Telegram Markdown —Å—Å—ã–ª–∫–∏ (–ù–ï —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ—Å—Ç)
- [ ] [screen_name|Title] ‚Üí [Title](https://vk.com/screen_name)
- [ ] [club/public/id123|Title] –ø–æ–¥–¥–µ—Ä–∂–∞–Ω—ã
- [ ] [https://example.com|–¢–µ–∫—Å—Ç] ‚Üí [–¢–µ–∫—Å—Ç](https://example.com)
- [ ] vk.com/wall-‚Ä¶ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ª–∏–Ω–∫, –Ω–æ –Ω–µ –ø–æ–¥–º–µ–Ω—è–µ—Ç Title-—Å—Å—ã–ª–∫–∏
- [ ] vk.cc/‚Ä¶ –æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–∞–∫ –µ—Å—Ç—å (–≤–Ω–µ—à–Ω–∏–π —Å–∞–π—Ç –≤–æ–∑–º–æ–∂–µ–Ω)
- [ ] –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã Markdown –≤ Title
- –¢–µ—Å—Ç-–∫–µ–π—Å—ã ‚Äî —Å–º. –Ω–∏–∂–µ

9) –û–ø—Ü–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ —Ñ–ª–∞–≥–∞–º
- [ ] –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –∂–∏—Ä–Ω—ã–º (on/off)
- [ ] –°–ª–æ–≤–∞ –í–ï–†–•–ù–ò–ú –†–ï–ì–ò–°–¢–†–û–ú ‚Äî –∂–∏—Ä–Ω—ã–º (on/off)

10) –ù–∞–∑–≤–∞–Ω–∏—è VK/TG ‚Äî —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤—ã–¥–∞—á–∞ –∏ –∫–µ—à
- [x] ‚úÖ getVkGroupName/getTelegramChatName + –∫–µ—à
- [x] ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –ª–æ–≥–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

11) Enhanced Error Logging
- [ ] logApiCall (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ VK_API/TG_API/SYSTEM/USER, http-status, body)
- [ ] –ê–≤—Ç–æ-—Ä–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤

12) Comprehensive Error Handling
- [ ] retryApiCall(backoff)
- [ ] –°—Ç—Ä–æ–≥–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### D. üöÄ –ù–û–í–û–ï: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
13) –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [x] ‚úÖ PropertiesService –∫–µ—à –¥–ª—è VK/TG –Ω–∞–∑–≤–∞–Ω–∏–π
- [ ] –ë–∞—Ç—á–µ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π (handleBatchGetNames)
- [ ] –§–æ–Ω–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–µ—à–∞ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é

14) –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è API –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] –£–º–µ–Ω—å—à–∏—Ç—å —Ç–∞–π–º–∞—É—Ç—ã: FAST (8—Å), MEDIUM (15—Å), SLOW (30—Å)
- [ ] Fallback –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –≤ –∫–µ—à–µ
- [ ] –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### F. üéØ –ö–†–ò–¢–ò–ß–ù–û: Client-Server —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
15) –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π —Å–≤—è–∑–æ–∫
- [ ] **–í handleAddBinding**: –ø—Ä–∏–Ω–∏–º–∞—Ç—å binding_name, binding_description
- [ ] **–í handleEditBinding**: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ binding_name, binding_description
- [ ] **–í Bindings –ª–∏—Å—Ç–µ**: –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫–∏ Binding Name, Binding Description
- [ ] **–í getUserBindingsWithNames**: –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–≤—è–∑–∫–∏
- [ ] **–ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: –∞–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–æ–ª–æ–Ω–æ–∫ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ

16) –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- [ ] **Fallback –ª–æ–≥–∏–∫–∞**: –µ—Å–ª–∏ –Ω–æ–≤—ã–µ –ø–æ–ª—è –ø—É—Å—Ç—ã–µ ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å VK Group Name
- [ ] **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å binding_name –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–≤—è–∑–∫–∏
- [ ] **UI —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: –∫–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –≤—Å–µ –ø–æ–ª—è —Å —Å–µ—Ä–≤–µ—Ä–∞

---

## üñ•Ô∏è CLIENT (client.gs)

1) ¬´–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø–æ—Å—Ç¬ª –≤–º–µ—Å—Ç–æ ¬´–¢–µ—Å—Ç¬ª
- [x] ‚úÖ UI: –∑–∞–º–µ–Ω–∏—Ç—å –∫–Ω–æ–ø–∫—É –Ω–∞ ¬´üß™ –¢–µ—Å—Ç¬ª (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
- [x] ‚úÖ –§—É–Ω–∫—Ü–∏—è publishLastPost() –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –í—ã–∑–æ–≤ event "send_post" –±–µ–∑ vk_post ‚Üí —Å–µ—Ä–≤–µ—Ä –ø—É–±–ª–∏–∫—É–µ—Ç –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

2) –ü–µ—Ä–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è: 1 –∏–ª–∏ N –ø–æ—Å—Ç–æ–≤
- [x] ‚úÖ –í UI: select —Å –æ–ø—Ü–∏—è–º–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (1, 3, 5, 10 –ø–æ—Å—Ç–æ–≤)
- [ ] –ü–µ—Ä–µ–¥–∞—á–∞ sync_recent_enabled, sync_recent_count –≤ payload
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ Bindings
- [ ] –õ–æ–≥–∏–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª—å–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–≤—è–∑–∫–∏

3) Published-–ª–∏—Å—Ç—ã –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –≥—Ä—É–ø–ø—ã
- [ ] getOrCreatePublishedPostsSheet(vkGroupId, vkGroupName) - –Ω–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
- [ ] markPostAsSent() - –ø–µ—Ä–µ–¥–∞—á–∞ –Ω–∞–∑–≤–∞–Ω–∏–π –≥—Ä—É–ø–ø/—á–∞—Ç–æ–≤
- [ ] –ù–æ–≤—ã–µ –∫–æ–ª–æ–Ω–∫–∏: Post Preview, TG Chat Name
- [ ] –§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã DD.MM.YYYY, HH:mm (RU –ª–æ–∫–∞–ª—å)
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö –ª–∏—Å—Ç–æ–≤ Published_-123456 ‚Üí Published_GroupName

4) –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî –æ–ø—Ü–∏–∏ –≤ —Å–≤—è–∑–∫–µ
- [x] ‚úÖ –ß–µ–∫–±–æ–∫—Å—ã: ¬´–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –∂–∏—Ä–Ω—ã–º¬ª, ¬´–í–°–ï –ó–ê–ì–õ–ê–í–ù–´–ï ‚Äî –∂–∏—Ä–Ω—ã–º¬ª
- [x] ‚úÖ –ü–µ—Ä–µ–¥–∞—á–∞ format_settings –≤ payload
- [x] ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ modal —Ñ–æ—Ä–º–µ

5) –ú–∞—Å—Å–æ–≤—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å
- [x] ‚úÖ –ß–µ–∫–±–æ–∫—Å "–í—ã–∫–ª—é—á–∏—Ç—å –≤—Å–µ –º–∞–≥–∞–∑–∏–Ω—ã" –≤ UI
- [x] ‚úÖ toggleAllStores() —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- [x] ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å handleSetGlobalSetting

6) –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π ScriptApp (–±–µ–∑ appsscript.json)
- [x] ‚úÖ setupTrigger() —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- [x] ‚úÖ –ö–Ω–æ–ø–∫–∞ ¬´‚è±Ô∏è –ê–≤—Ç–æ-–ø—Ä–æ–≤–µ—Ä–∫–∞¬ª –≤ UI
- [x] ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º

7) UI –∏–º—ë–Ω –∏ —Å—Ç–∞—Ç—É—Å–æ–≤  
- [x] ‚úÖ –ü–æ–∫–∞–∑ –Ω–∞–∑–≤–∞–Ω–∏–π —Å–≤—è–∑–æ–∫ –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö (bindingName + vkGroupName)
- [x] ‚úÖ Fallback –Ω–∞ URL/chat_id –µ—Å–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
- [x] ‚úÖ –°—Ç–∞—Ç—É—Å—ã –∞–∫—Ç–∏–≤–Ω—ã—Ö/–ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Å–≤—è–∑–æ–∫
- [ ] Warning –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è –ø—Ä–æ–±–ª–µ–º —Å —Ç–æ–∫–µ–Ω–∞–º–∏/–ø—Ä–∞–≤–∞–º–∏

### G. üéõÔ∏è –ù–û–í–û–ï: UI/UX —É–ª—É—á—à–µ–Ω–∏—è
10) Sidebar –∏ collapse —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- [x] ‚úÖ –ö–Ω–æ–ø–∫–∞ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –ø–∞–Ω–µ–ª–∏ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ
- [x] ‚úÖ Mini-–ø–∞–Ω–µ–ª—å —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º –ø—Ä–∏ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–∏  
- [x] ‚úÖ CSS –∫–ª–∞—Å—Å—ã .collapsed –∏ .mini-controls
- [ ] **–í–ê–ñ–ù–û**: –∏–∑–º–µ–Ω–∏—Ç—å openMainPanel() ‚Üí openSidebar() —Å showSidebar()

11) Enhanced binding management
- [x] ‚úÖ –ü–æ–ª—è binding_name –∏ binding_description –≤ modal —Ñ–æ—Ä–º–∞—Ö
- [x] ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è —Å–≤—è–∑–∫–∏
- [x] ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö —Å–≤—è–∑–æ–∫
- [ ] **–ö–†–ò–¢–ò–ß–ù–û**: server.gs –¥–æ–ª–∂–µ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è

### E. üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è UI –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏  
8) –£—Å–∫–æ—Ä–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Å–≤—è–∑–∫–∞–º–∏ (–ö–†–ò–¢–ò–ß–ù–û - 30—Å–µ–∫ ‚Üí 5—Å–µ–∫)
- [x] ‚úÖ HTML-side –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π (nameCache –æ–±—ä–µ–∫—Ç)
- [x] ‚úÖ loadBindingNamesAsync() —Å setTimeout —Ä–∞–∑–±—Ä–æ—Å–æ–º
- [x] ‚úÖ UI –ø—Ä–æ–≥—Ä–µ—Å—Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (‚è≥ –û–±—Ä–∞–±–æ—Ç–∫–∞..., ‚úÖ –ì–æ—Ç–æ–≤–æ, ‚ùå –û—à–∏–±–∫–∞)
- [x] ‚úÖ getCachedVkGroupName/getCachedTgChatName fallback —Ñ—É–Ω–∫—Ü–∏–∏
- [ ] –£–±—Ä–∞—Ç—å –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ API –≤—ã–∑–æ–≤—ã –∏–∑ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–π–º–∞—É—Ç—ã (FAST_TIMEOUT –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π)

9) –§–æ–Ω–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π
- [x] ‚úÖ loadSingleBindingName() –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- [x] ‚úÖ –†–∞–∑–Ω–µ—Å–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤–æ –≤—Ä–µ–º–µ–Ω–∏ (Math.random() * 1000)
- [x] ‚úÖ localStorage –∫–µ—à –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏
- [ ] Batch –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–π —Å—Ä–∞–∑—É

---

## üß© LINK CONVERSION ‚Äî –ü—Ä–∞–≤–∏–ª–∞ –∏ —Ç–µ—Å—Ç-–∫–µ–π—Å—ã (Server)

–ü—Ä–∞–≤–∏–ª–∞:
- [screen_name|Title] ‚Üí [Title](https://vk.com/screen_name)  
- [club123456|–ù–∞–∑–≤–∞–Ω–∏–µ]/[public123456|–ù–∞–∑–≤–∞–Ω–∏–µ]/[id123456|–ò–º—è] –ø–æ–¥–¥–µ—Ä–∂–∞–Ω—ã
- [https://example.com|–¢–µ–∫—Å—Ç] ‚Üí [–¢–µ–∫—Å—Ç](https://example.com)
- vk.com/wall-<id>_<postId> ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π –ª–∏–Ω–∫ (–Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç Title)
- vk.cc/short ‚Äî –æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–∞–∫ –µ—Å—Ç—å (–º–æ–∂–µ—Ç –≤–µ—Å—Ç–∏ –Ω–∞ –≤–Ω–µ—à–Ω–∏–π —Å–∞–π—Ç)
- –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã Markdown –≤ Title

–¢–µ—Å—Ç—ã:
- [durov|–ü–∞–≤–µ–ª –î—É—Ä–æ–≤] ‚Üí [–ü–∞–≤–µ–ª –î—É—Ä–æ–≤](https://vk.com/durov)
- [club123456|VK Dev] ‚Üí [VK Dev](https://vk.com/club123456)  
- [daoqub|@daoqub] ‚Üí [@daoqub](https://vk.com/daoqub)
- [durov|–ü–∞–≤–µ–ª –î—É—Ä–æ–≤ (VK)] ‚Üí [–ü–∞–≤–µ–ª –î—É—Ä–æ–≤ (VK)](https://vk.com/durov)
- https://vk.com/wall-123_456 ‚Üí –æ—Å—Ç–∞–µ—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å (standalone —Å—Å—ã–ª–∫–∞)
- [https://example.com|–°–∞–π—Ç] ‚Üí [–°–∞–π—Ç](https://example.com)

---

## üõ†Ô∏è CODE SAMPLES (Cheat)

```javascript
// Regex –¥–ª—è VK-–≥–∏–ø–µ—Ä—Å—Å—ã–ª–æ–∫ –≤–Ω—É—Ç—Ä–∏ []
const rx = /\[([^\]|]+)\|([^\]]+)\]/g; // screen_name | Title
text.replace(rx, (m, screen, title) => `[${title}](https://vk.com/${screen})`)

// –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –º–µ–¥–∏–∞–≥—Ä—É–ø–ø—ã —Å caption split
if (caption && caption.length > 1024) {
  sendMediaGroupWithoutCaption(token, chatId, mediaUrls);
  sendLongTextMessage(token, chatId, caption);
} else {
  sendMediaGroupWithCaption(token, chatId, mediaUrls, caption);
}

// –ü–µ—Ä–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è N –ø–æ—Å—Ç–æ–≤
const count = sync_recent_enabled ? Math.min(sync_recent_count, 50) : 1;

// –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π (Apps Script)
function getCachedVkGroupName(groupUrl) {
  const cache = PropertiesService.getScriptProperties();
  const cacheKey = `vk_name_${Utilities.computeDigest(Utilities.DigestAlgorithm.MD5, groupUrl, Utilities.Charset.UTF_8)}`;
  
  const cached = cache.getProperty(cacheKey);
  if (cached) {
    const data = JSON.parse(cached);
    if (Date.now() - data.timestamp < 3600000) { // 1 —á–∞—Å
      return data.name;
    }
  }
  return groupUrl; // fallback
}

// HTML-side –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏–π
function loadBindingNamesAsync() {
  appState.bindings.forEach((binding, index) => {
    setTimeout(() => {
      google.script.run
        .withSuccessHandler(name => {
          if (name) document.getElementById(`vk-name-${binding.id}`).textContent = name;
        })
        .getCachedVkGroupName(binding.vkGroupUrl);
    }, index * 200); // 200–º—Å –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
  });
}

// SERVER: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π —Å–≤—è–∑–æ–∫
function handleAddBinding(payload, clientIp) {
  const { 
    license_key, 
    binding_name,        // –ù–û–í–û–ï –ø–æ–ª–µ
    binding_description, // –ù–û–í–û–ï –ø–æ–ª–µ
    vk_group_url, 
    tg_chat_id, 
    format_settings 
  } = payload;
  
  // –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
  if (!binding_name || binding_name.trim() === '') {
    return jsonResponse({
      success: false,
      error: "Binding name is required"
    }, 400);
  }
  
  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Bindings —Å –Ω–æ–≤—ã–º–∏ –ø–æ–ª—è–º–∏
  bindingsSheet.appendRow([
    bindingId,
    license_key,
    license.email,
    binding_name.trim(),           // –ù–û–í–û–ï –ø–æ–ª–µ
    binding_description.trim(),    // –ù–û–í–û–ï –ø–æ–ª–µ
    vk_group_url,
    processedTgChatId,
    "active",
    new Date().toISOString(),
    new Date().toISOString(),
    formatSettingsString
  ]);
}

// SIDEBAR –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
function openSidebar() {
  const html = HtmlService.createHtmlOutput(getMainPanelHtml())
    .setWidth(450)
    .setTitle("VK‚ÜíTelegram Manager");
  
  SpreadsheetApp.getUi().showSidebar(html);
}
```

---

## üßπ –ß–∏—Å—Ç–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- –£–¥–∞–ª–∏—Ç—å: –≤—Å–µ —Ä–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω—ã–µ TODO/README –≤ to_fix, todo_server.gs, todo_clients.gs, todo_clients_permissions.gs, vk_link_markdown_todo.txt (–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã —Å—é–¥–∞)
- –ò—Å—Ç–∏–Ω–∞ ‚Äî —ç—Ç–æ—Ç –µ–¥–∏–Ω—ã–π —Ñ–∞–π–ª: Unified TODO (–∫–æ—Ä–µ–Ω—å)

---

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ó–ê–î–ê–ß–ò –î–õ–Ø CLIENT-SERVER –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–ò

### üî• **–ù–ï–ú–ï–î–õ–ï–ù–ù–û –ò–°–ü–†–ê–í–ò–¢–¨:**

1) **Server.gs - –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É Bindings –ª–∏—Å—Ç–∞:**
```javascript
// –¢–ï–ö–£–©–ê–Ø —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: ["Binding ID", "License Key", "User Email", "VK Group URL", "TG Chat ID", "Status", "Created At", "Last Check", "Format Settings"]

// –ù–û–í–ê–Ø —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
createSheet("Bindings", [
  "Binding ID", "License Key", "User Email", 
  "Binding Name",        // –ù–û–í–û–ï –ø–æ–ª–µ  
  "Binding Description", // –ù–û–í–û–ï –ø–æ–ª–µ
  "VK Group URL", "TG Chat ID", "Status", 
  "Created At", "Last Check", "Format Settings"
]);
```

2) **–í—Å–µ handleXXXBinding —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±–Ω–æ–≤–∏—Ç—å:**
- handleAddBinding() - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ binding_name, binding_description
- handleEditBinding() - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π  
- getUserBindingsWithNames() - –≤–æ–∑–≤—Ä–∞—Ç –≤—Å–µ—Ö –ø–æ–ª–µ–π –≤–∫–ª—é—á–∞—è –Ω–∞–∑–≤–∞–Ω–∏—è
- findBindingById() - —Ä–∞–±–æ—Ç–∞ —Å –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π

3) **–§—É–Ω–∫—Ü–∏—è publishLastPost() –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
```javascript
// SERVER: –¥–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
case "publish_last_post":
  return handlePublishLastPost(payload, clientIp);

function handlePublishLastPost(payload, clientIp) {
  // –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø–æ—Å—Ç –∏–∑ VK –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ TG
}
```

---

## üìä –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (CLIENT):
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤—è–∑–æ–∫ (–∫–Ω–æ–ø–∫–∞ üß™)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Å–≤—è–∑–∫–∞—Ö
- –ì–ª–æ–±–∞–ª—å–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã 
- –ü–æ–∫–∞–∑ –∏–º–µ–Ω VK/TG –≥—Ä—É–ø–ø –≤ UI
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
- **UI –¥–ª—è –Ω–∞–∑–≤–∞–Ω–∏–π —Å–≤—è–∑–æ–∫ –∏ –æ–ø–∏—Å–∞–Ω–∏–π**
- **Collapse/Expand –ø–∞–Ω–µ–ª—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏–π —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º**
- **Progress –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π**
- **publishLastPost() —Ñ—É–Ω–∫—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞**

### ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (SERVER):
- –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π VK/TG –≥—Ä—É–ø–ø —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (disable_all_stores)
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- –ü–∞–∫–µ—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –≥—Ä—É–ø–ø

### üöß –í –†–ê–ë–û–¢–ï (–ö–†–ò–¢–ò–ß–ù–û):
- **Server.gs –ø–æ–¥–¥–µ—Ä–∂–∫–∞ binding_name, binding_description**
- **–ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã Bindings –ª–∏—Å—Ç–∞**
- **handlePublishLastPost –æ–±—Ä–∞–±–æ—Ç—á–∏–∫**
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ UI (30—Å–µ–∫ ‚Üí 5—Å–µ–∫)
- Published-–ª–∏—Å—Ç—ã –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—è–º –≥—Ä—É–ø–ø

### ‚è≥ –ü–õ–ê–ù–ò–†–£–ï–¢–°–Ø:
- API —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∏ —É—Ç–∏–ª–∏—Ç—ã
- –°—Ç—Ä–æ–≥–∏–µ –º–µ–¥–∏–∞-–≥—Ä—É–ø–ø—ã 
- Comprehensive error handling
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ VK ‚Üí TG —Å—Å—ã–ª–æ–∫