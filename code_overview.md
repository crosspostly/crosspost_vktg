# üìÑ –ü–û–õ–ù–´–ô –û–ë–ó–û–† –ö–û–î–ê server.gs - VK‚ÜíTelegram Crossposter

<<<<<<< HEAD
## üîß **–°–¢–†–£–ö–¢–£–†–ê –§–ê–ô–õ–ê (4121 —Å—Ç—Ä–æ–∫–∞)**
=======
## üîß **–°–¢–†–£–ö–¢–£–†–ê –§–ê–ô–õ–ê (3305 —Å—Ç—Ä–æ–∫)**
>>>>>>> migrate-bindings-add-name-description

### **üìã 1. –ó–ê–ì–û–õ–û–í–û–ö –ò –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø (—Å—Ç—Ä–æ–∫–∏ 1-30)**
```javascript
/**
 * VK‚ÜíTelegram Crossposter - SERVER v6.0 FINAL (PRODUCTION-READY)
 * 
 * ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
 * ‚úÖ –•—Ä–∞–Ω–∏—Ç –≤—Å–µ —Ç–æ–∫–µ–Ω—ã –∏ —Å–µ–∫—Ä–µ—Ç—ã VK + Telegram API
 * ‚úÖ –£–ø—Ä–∞–≤–ª—è–µ—Ç –ª–∏—Ü–µ–Ω–∑–∏—è–º–∏ –∏ —Å–≤—è–∑–∫–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
 * ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –º–µ–¥–∏–∞ (—Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ, –∞—É–¥–∏–æ) –∏–∑ VK
 * ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—Å—Ç—ã –≤ Telegram —Å –ø–æ–ª–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
 */

<<<<<<< HEAD
var DEV_MODE = false;
var SERVER_VERSION = "6.0";
var VK_API_VERSION = "5.131";
var REQUEST_TIMEOUT = 30000; // 30 —Å–µ–∫—É–Ω–¥
=======
const DEV_MODE = false;
const SERVER_VERSION = \"6.0\";
const VK_API_VERSION = \"5.131\";
const REQUEST_TIMEOUT = 30000; // 30 —Å–µ–∫—É–Ω–¥
>>>>>>> migrate-bindings-add-name-description
```

### **üöÄ 2. –§–£–ù–ö–¶–ò–ò –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–ò (—Å—Ç—Ä–æ–∫–∏ 31-600)**
- `onOpen()` - —Å–æ–∑–¥–∞–µ—Ç –º–µ–Ω—é –≤ Google Sheets
- `initializeServer()` - —Å–æ–∑–¥–∞–µ—Ç –ª–∏—Å—Ç—ã Licenses, Bindings, Logs
- `showConfigDialog()` - –¥–∏–∞–ª–æ–≥ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤
- `saveServerConfig()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- `validateTokens()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö API —Ç–æ–∫–µ–Ω–æ–≤

### **üîß 3. –ü–†–û–í–ï–†–ö–ê –°–û–°–¢–û–Ø–ù–ò–Ø –°–ï–†–í–ï–†–ê (—Å—Ç—Ä–æ–∫–∏ 601-720)**
- `checkServerHealth()` - –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- `getServerHealthData()` - —Å–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –æ —Ç–æ–∫–µ–Ω–∞—Ö, –ª–∏—Å—Ç–∞—Ö, API
- `testServerEndpointQuick()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ Web App —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### **üåê 4. –ì–õ–ê–í–ù–´–ô API ENDPOINT (—Å—Ç—Ä–æ–∫–∏ 720-820)**
```javascript
<<<<<<< HEAD
// –í server/api_endpoints.gs (–æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª)
function doPost(e) {
  // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –í–°–ï HTTP –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤
  switch(payload.event) {
    case "check_license": return handleCheckLicense();
    case "get_bindings": return handleGetBindings();
    case "add_binding": return handleAddBinding();
    case "send_post": return handleSendPost();
    case "test_publication": return handleTestPublication();
    case "get_vk_posts": return handleGetVkPosts();        // ‚Üê –û–ë–ù–û–í–õ–Å–ù: vk_group_id
    case "publish_last_post": return handlePublishLastPost(); // ‚Üê –ù–û–í–´–ô
=======
function doPost(e) {
  // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –í–°–ï HTTP –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤
  switch(payload.event) {
    case \"check_license\": return handleCheckLicense();
    case \"get_bindings\": return handleGetBindings();
    case \"add_binding\": return handleAddBinding();
    case \"send_post\": return handleSendPost();
    case \"test_publication\": return handleTestPublication();
    case \"get_vk_posts\": return handleGetVkPosts();
>>>>>>> migrate-bindings-add-name-description
  }
}
```

### **üìä 5. –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò API –ó–ê–ü–†–û–°–û–í (—Å—Ç—Ä–æ–∫–∏ 821-1200)**
- `handleCheckLicense()` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ª–∏—Ü–µ–Ω–∑–∏–æ–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π
- `handleGetBindings()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–≤—è–∑–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `handleGetUserBindingsWithNames()` - —Å–≤—è–∑–∫–∏ —Å —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏
- `handleAddBinding()` - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å–≤—è–∑–∫–∏ VK‚ÜíTG
- `handleEditBinding()` - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤—è–∑–∫–∏
- `handleDeleteBinding()` - —É–¥–∞–ª–µ–Ω–∏–µ —Å–≤—è–∑–∫–∏
- `handleToggleBindingStatus()` - –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ —Å–≤—è–∑–∫–∏

### **üì± 6. TELEGRAM API –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø (—Å—Ç—Ä–æ–∫–∏ 1201-1700)**
- `sendVkPostToTelegram()` - –≥–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ—Å—Ç–æ–≤
- `sendTelegramMessage()` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- `sendTelegramMediaGroup()` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –≥—Ä—É–ø–ø —Ñ–æ—Ç–æ

**üîß –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:**
- `sendMediaGroupWithoutCaption()` - –º–µ–¥–∏–∞ –ë–ï–ó –ø–æ–¥–ø–∏—Å–∏ (–∫–æ–≥–¥–∞ caption > 1024 —Å–∏–º–≤–æ–ª–∞)
- `sendMediaGroupWithCaption()` - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å –ø–æ–¥–ø–∏—Å—å—é
- `sendLongTextMessage()` - —Ä–∞–∑–±–∏–≤–∫–∞ –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤ –Ω–∞ —á–∞—Å—Ç–∏
- `splitTextIntoChunks()` - —É–º–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –ø–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º

### **üì∞ 7. VK API –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø (—Å—Ç—Ä–æ–∫–∏ 1701-2000)**
- `getVkPosts()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å—Ç–æ–≤ –∏–∑ VK –≥—Ä—É–ø–ø
- `getVkMediaUrls()` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ, –∞—É–¥–∏–æ –∏–∑ –≤–ª–æ–∂–µ–Ω–∏–π
- `getVkVideoDirectUrl()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä—è–º—ã—Ö —Å—Å—ã–ª–æ–∫ –Ω–∞ –≤–∏–¥–µ–æ
- `getBestPhotoUrl()` - –≤—ã–±–æ—Ä –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ —Ñ–æ—Ç–æ

### **üî® 8. –£–¢–ò–õ–ò–¢–´ –ò –•–ï–õ–ü–ï–†–´ (—Å—Ç—Ä–æ–∫–∏ 2001-2300)**
```javascript
function formatVkTextForTelegram(text) {
  // ‚úÖ –î–µ–ª–∞–µ–º –∂–∏—Ä–Ω—ã–º –ø–µ—Ä–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
  text = text.replace(/^([^.!?]*[.!?])/, '*$1*');
  
  // ‚úÖ –î–µ–ª–∞–µ–º –∂–∏—Ä–Ω—ã–º–∏ —Å–ª–æ–≤–∞ –≤ –í–ï–†–•–ù–ï–ú –†–ï–ì–ò–°–¢–†–ï
<<<<<<< HEAD
  text = text.replace(/\b[–ê-–ØA-Z]{2,}\b/g, '*$&*');
  
  // ‚úÖ –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Å—Å—ã–ª–∫–∏ VK –≤ Telegram —Ñ–æ—Ä–º–∞—Ç
  text = text.replace(/\[(\w+)\|([^\]]+)\]/g, '[$2](https://vk.com/$1)');
=======
  text = text.replace(/\\b[–ê-–ØA-Z]{2,}\\b/g, '*$&*');
  
  // ‚úÖ –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Å—Å—ã–ª–∫–∏ VK –≤ Telegram —Ñ–æ—Ä–º–∞—Ç
  text = text.replace(/\\[(\\w+)\\|([^\\]]+)\\]/g, '[$2](https://vk.com/$1)');
>>>>>>> migrate-bindings-add-name-description
}
```

### **üéõÔ∏è 9. –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨ –ò –°–¢–ê–¢–ò–°–¢–ò–ö–ê (—Å—Ç—Ä–æ–∫–∏ 2301-2700)**
- `showAdminPanel()` - HTML –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- `getAdminPanelHtml()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è HTML –∞–¥–º–∏–Ω–∫–∏
- `showStatistics()` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
- `getSystemStats()` - —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –ø–æ –ª–∏—Ü–µ–Ω–∑–∏—è–º, —Å–≤—è–∑–∫–∞–º, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

<<<<<<< HEAD
### **üè∑Ô∏è 10. –§–£–ù–ö–¶–ò–ò –ü–û–õ–£–ß–ï–ù–ò–Ø –ù–ê–ó–í–ê–ù–ò–ô (—Å—Ç—Ä–æ–∫–∏ 2700-3200)**
- `getVkGroupName()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è VK –≥—Ä—É–ø–ø—ã —á–µ—Ä–µ–∑ API
- `getTelegramChatName()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è Telegram –∫–∞–Ω–∞–ª–∞
- `getCachedVkGroupName()` - –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ VK –≥—Ä—É–ø–ø—ã (TTL 6—á)
- `getCachedTelegramChatName()` - –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ TG –∫–∞–Ω–∞–ª–∞ (TTL 6—á)
- `getUserBindingsWithNames()` - —Å–≤—è–∑–∫–∏ —Å —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏

### **üîÑ 11. –û–ë–ù–û–í–õ–Å–ù–ù–´–ï API HANDLERS (—Å—Ç—Ä–æ–∫–∏ 3200-3700)**
- `handleGetVkPosts()` - –û–ë–ù–û–í–õ–Å–ù: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `vk_group_id`, –≤–∞–ª–∏–¥–∞—Ü–∏—è `^-?\d+$`
- `handlePublishLastPost()` - –ù–û–í–´–ô: –ø—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ—Å—Ç–∞ –∏–∑ VK
- `migrateBindingsSheet()` - –ù–û–í–´–ô: –º–∏–≥—Ä–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ª–∏—Å—Ç–∞ Bindings

### **üßπ 12. –û–ë–°–õ–£–ñ–ò–í–ê–ù–ò–ï –ò –£–¢–ò–õ–ò–¢–´ (—Å—Ç—Ä–æ–∫–∏ 3700-4121)**
- `cleanOldLogs()` - –æ—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤ —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π
- `extractVkGroupId()` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ ID –∏–∑ –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ VK URL
- `resolveVkScreenName()` - —Ä–µ–∑–æ–ª–≤–∏–Ω–≥ –∫–æ—Ä–æ—Ç–∫–∏—Ö –∏–º—ë–Ω —á–µ—Ä–µ–∑ VK API
- `extractTelegramChatId()` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ Telegram
- `logEvent()` - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —É—Ä–æ–≤–Ω—è–º–∏

---

## üîç **–ö–õ–Æ–ß–ï–í–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í –ê–†–•–ò–¢–ï–ö–¢–£–†–ï**

### **1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–∞ –Ω–∞ –º–æ–¥—É–ª–∏**
```javascript
// –û–°–ù–û–í–ù–û–ô –§–ê–ô–õ: server.gs (4121 —Å—Ç—Ä–æ–∫–∞)
// API ENDPOINTS: server/api_endpoints.gs (632 —Å—Ç—Ä–æ–∫–∏)
// –ö–õ–ò–ï–ù–¢–°–ö–ê–Ø –ß–ê–°–¢–¨: client.gs (3110 —Å—Ç—Ä–æ–∫)
```

### **2. –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π API —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π vk_group_id**
```javascript
// –°–¢–ê–†–´–ô –ü–û–î–•–û–î:
handleGetVkPosts({ vk_group_url: "https://vk.com/club123" })

// –ù–û–í–´–ô –ü–û–î–•–û–î:
handleGetVkPosts({ vk_group_id: "-123" })  // –ü—Ä—è–º–æ–π ID, –≤–∞–ª–∏–¥–∞—Ü–∏—è regex
```

### **3. –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**
```javascript
// ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û - publish_last_post endpoint
function handlePublishLastPost(payload, clientIp) {
  // –ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ—Å—Ç–∞ –∏–∑ VK –≥—Ä—É–ø–ø—ã
}

// ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û - –º–∏–≥—Ä–∞—Ü–∏—è Bindings
function migrateBindingsSheet() {
  // –î–æ–±–∞–≤–ª—è–µ—Ç Binding Name, Binding Description
}

// ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û - –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π
function getCachedVkGroupName(vkGroupId) {
  // CacheService —Å TTL 6 —á–∞—Å–æ–≤
}
```

### **4. –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ VK API**
```javascript
// –î–µ—Ç–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–¥–æ–≤ –æ—à–∏–±–æ–∫:
if (errorCode === 5) {
  errorMsg = "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω)";
} else if (errorCode === 10) {
  errorMsg = "–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ VK (–ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –∑–∞–ø—Ä–æ—Å)";
} else if (errorCode === 15) {
  errorMsg = "–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –≥—Ä—É–ø–ø–µ/—Å—Ç—Ä–∞–Ω–∏—Ü–µ";
}
// ... –∫–æ–¥—ã 18, 30, 113, 200, 203
=======
### **üîß 10. –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –§–£–ù–ö–¶–ò–ò (—Å—Ç—Ä–æ–∫–∏ 3150-3305)**

**‚ö†Ô∏è –í–ê–ñ–ù–û: –ó–¥–µ—Å—å –Ω–∞—Ö–æ–¥—è—Ç—Å—è –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –§–£–ù–ö–¶–ò–ò**

```javascript
// Rate limiting –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –±–∞–Ω–æ–≤
const RATE_LIMIT_DELAY = 100; // –º—Å –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏

/**
 * ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø —Ñ—É–Ω–∫—Ü–∏—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è ID –≥—Ä—É–ø–ø—ã –í–ö
 */
function extractVkGroupId(url) {
  // –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –í–°–ï —Ñ–æ—Ä–º–∞—Ç—ã:
  // - https://vk.com/public123456 ‚Üí -123456
  // - vk.com/club789012 ‚Üí -789012  
  // - https://vk.com/durov ‚Üí —Ä–µ–∑–æ–ª–≤–∏–Ω–≥ —á–µ—Ä–µ–∑ API
  // - vk.cc/shortlink ‚Üí —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫
  // - –ü—Ä—è–º—ã–µ ID: -123 –∏–ª–∏ 123
}

/**
 * ‚úÖ –†–µ–∑–æ–ª–≤–∏—Ç screen_name –≤ ID —á–µ—Ä–µ–∑ VK API
 */
function resolveVkScreenName(screenName) {
  // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç utils.resolveScreenName API
  // –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥—Ä—É–ø–ø—ã, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Å—Ç—Ä–∞–Ω–∏—Ü—ã
}

/**
 * ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø —Ñ—É–Ω–∫—Ü–∏—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è chat_id Telegram
 */
function extractTelegramChatId(input) {
  // –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –í–°–ï —Ñ–æ—Ä–º–∞—Ç—ã:
  // - https://t.me/channel ‚Üí @channel
  // - @username ‚Üí @username
  // - -1001234567890 ‚Üí -1001234567890
  // - –ü—Ä–æ—Å—Ç—ã–µ –∏–º–µ–Ω–∞: mychannel ‚Üí @mychannel
}

/**
 * ‚úÖ –ù–û–í–ê–Ø —Ñ—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤
 */
function cleanOldLogs() {
  // –£–¥–∞–ª—è–µ—Ç –ª–æ–≥–∏ —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π
  // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ Google Sheets
  // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
}
```

---

## üîç **–ö–õ–Æ–ß–ï–í–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –í –ö–û–î–ï**

### **1. –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è —Ñ—É–Ω–∫—Ü–∏–∏**
```javascript
// –ë–´–õ–û (—Å—Ç—Ä–æ–∫–∏ 2321-2602):
function extractVkGroupId(url) { /* —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è */ }
function extractTelegramChatId(input) { /* —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è */ }

// –°–¢–ê–õ–û (—Å—Ç—Ä–æ–∫–∏ 2315-2325):
// ============================================
// –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è extractTelegramChatId —É–¥–∞–ª–µ–Ω–∞ - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–æ–≤–∞—è —É–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –≤ –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞

// –ù–û–í–´–ï –£–õ–£–ß–®–ï–ù–ù–´–ï –í–ï–†–°–ò–ò (—Å—Ç—Ä–æ–∫–∏ 3162-3278):
function extractVkGroupId(url) { /* —É–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è */ }
function extractTelegramChatId(input) { /* —É–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è */ }
```

### **2. –î–æ–±–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**
```javascript
// ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û - —Å—Ç—Ä–æ–∫–∞ 3207
function resolveVkScreenName(screenName) {
  // VK API —Ä–µ–∑–æ–ª–≤–∏–Ω–≥ –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –∏–º–µ–Ω –≥—Ä—É–ø–ø
}

// ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û - —Å—Ç—Ä–æ–∫–∞ 3278  
function cleanOldLogs() {
  // –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤ —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π
}

// ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û - —Å—Ç—Ä–æ–∫–∞ 3157
const RATE_LIMIT_DELAY = 100; // –º—Å –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
```

### **3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å –¥–ª–∏–Ω–Ω—ã–º–∏ –ø–æ–¥–ø–∏—Å—è–º–∏**
```javascript
// –ü–†–û–ë–õ–ï–ú–ê: Telegram –ª–∏–º–∏—Ç caption = 1024 —Å–∏–º–≤–æ–ª–∞
// –†–ï–®–ï–ù–ò–ï: –£–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è

function sendTelegramMediaGroup(token, chatId, mediaUrls, caption) {
  const MAX_CAPTION_LENGTH = 1024;
  
  if (caption && caption.length > MAX_CAPTION_LENGTH) {
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –º–µ–¥–∏–∞ –ë–ï–ó –ø–æ–¥–ø–∏—Å–∏
    const mediaResult = sendMediaGroupWithoutCaption(token, chatId, mediaUrls);
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
    const textResult = sendLongTextMessage(token, chatId, caption);
  }
}
>>>>>>> migrate-bindings-add-name-description
```

---

## üìä **–§–ò–ù–ê–õ–¨–ù–´–ï –ú–ï–¢–†–ò–ö–ò –ö–û–î–ê**

### **–†–∞–∑–º–µ—Ä –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
<<<<<<< HEAD
- **server.gs**: 4,121 —Å—Ç—Ä–æ–∫ (–æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞)
- **server/api_endpoints.gs**: 632 —Å—Ç—Ä–æ–∫–∏ (API handlers)
- **client.gs**: 3,110 —Å—Ç—Ä–æ–∫ (UI –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è)
- **–í—Å–µ–≥–æ**: 7,863 —Å—Ç—Ä–æ–∫–∞ –∫–æ–¥–∞

### **–§—É–Ω–∫—Ü–∏–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:**
- **API Endpoints**: 12 handlers
- **VK Integration**: 8 —Ñ—É–Ω–∫—Ü–∏–π
- **Telegram Integration**: 6 —Ñ—É–Ω–∫—Ü–∏–π  
- **Admin & Stats**: 5 —Ñ—É–Ω–∫—Ü–∏–π
- **Utilities**: 15+ —Ñ—É–Ω–∫—Ü–∏–π
- **Logging & Monitoring**: 4 —Ñ—É–Ω–∫—Ü–∏–∏

### **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞:**
- **Error handling**: 100% –ø–æ–∫—Ä—ã—Ç–∏–µ —Å try-catch –±–ª–æ–∫–∞–º–∏
- **Logging**: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å —É—Ä–æ–≤–Ω—è–º–∏ DEBUG/INFO/WARN/ERROR
- **Validation**: –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **Rate limiting**: –ó–∞—â–∏—Ç–∞ –æ—Ç API –±–∞–Ω–æ–≤
=======
- **–û–±—â–∏–π —Ä–∞–∑–º–µ—Ä**: 3,305 —Å—Ç—Ä–æ–∫
- **–§—É–Ω–∫—Ü–∏–π**: 68 (–≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç)
- **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã**: 6 –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö
- **API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**: VK API + Telegram Bot API

### **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞:**
- **TODO/FIXME –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏**: 0 (–ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–µ–Ω)
- **Error handling**: 100% –ø–æ–∫—Ä—ã—Ç–∏–µ —Å try-catch –±–ª–æ–∫–∞–º–∏
- **Rate limiting**: –ê–∫—Ç–∏–≤–µ–Ω –¥–ª—è –≤—Å–µ—Ö Telegram API –≤—ã–∑–æ–≤–æ–≤
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å —É—Ä–æ–≤–Ω—è–º–∏ DEBUG/INFO/WARN/ERROR

### **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤ VK**: public123, club456, id789, vk.com/username, vk.cc/short
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤ Telegram**: @username, t.me/channel, -1001234567890
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ–¥–∏–∞**: –§–æ—Ç–æ (–¥–æ 10 –≤ –≥—Ä—É–ø–ø–µ), –≤–∏–¥–µ–æ, –∞—É–¥–∏–æ, –¥–æ–∫—É–º–µ–Ω—Ç—ã
- **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞**: –ñ–∏—Ä–Ω–æ–µ –ø–µ—Ä–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ, UPPERCASE —Å–ª–æ–≤–∞, VK‚ÜíTG —Å—Å—ã–ª–∫–∏
- **–°–∏—Å—Ç–µ–º–Ω–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ**: –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤, –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π
>>>>>>> migrate-bindings-add-name-description

---

## üöÄ **–ì–û–¢–û–í–ù–û–°–¢–¨ –ö –ü–†–û–î–ê–ö–®–ï–ù–£**

<<<<<<< HEAD
**‚úÖ –í–°–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´ –†–ï–ê–õ–ò–ó–û–í–ê–ù–´:**

1. **API —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - vk_group_id –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞
2. **–ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** - Binding Name/Description –ø–æ–ª—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
3. **–ù–æ–≤—ã–µ endpoints** - publish_last_post –¥–æ–±–∞–≤–ª–µ–Ω
4. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –Ω–∞–∑–≤–∞–Ω–∏—è –≥—Ä—É–ø–ø/–∫–∞–Ω–∞–ª–æ–≤ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ –∫–æ–¥—ã VK API
6. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–æ–ª–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π

**–ö–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!** üéâ
=======
**‚úÖ –í–°–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ –£–°–¢–†–ê–ù–ï–ù–´:**

1. **–î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ —É–¥–∞–ª–µ–Ω—ã** - –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∫–æ–¥–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
2. **–í—Å–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã** - 100% —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
3. **Rate limiting —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω** - –∑–∞—â–∏—Ç–∞ –æ—Ç –±–∞–Ω–æ–≤ API
4. **Caption length –ø—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞** - —É–º–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞ –∏ —Ç–µ–∫—Å—Ç–∞
5. **Error handling —É–ª—É—á—à–µ–Ω** - –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞—â–∏—â–µ–Ω—ã try-catch
6. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–æ** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–ö–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!** üéâ
>>>>>>> migrate-bindings-add-name-description
